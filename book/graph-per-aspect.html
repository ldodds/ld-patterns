<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Graph Per Aspect</title><link rel="stylesheet" href="../css/style.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="Linked Data Patterns" /><link rel="up" href="data-management-patterns.html" title="Chapter 5. Data Management Patterns" /><link rel="prev" href="graph-annotation.html" title="Graph Annotation" /><link rel="next" href="graph-per-resource.html" title="Graph Per Resource" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Graph Per Aspect</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="graph-annotation.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Data Management Patterns</th><td width="20%" align="right"> <a accesskey="n" href="graph-per-resource.html">Next</a></td></tr></table><hr /></div><div class="sect1" title="Graph Per Aspect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-per-aspect"></a>Graph Per Aspect</h2></div></div></div><p> 
   <span class="emphasis"><em>How can we avoid contention around updates to a single graph when applying the <a class="link" href="graph-per-resource.html" title="Graph Per Resource">Graph Per Resource</a> pattern?</em></span>
  </p><div class="sect2" title="Context"><div class="titlepage"><div><div><h3 class="title"><a id="id2622974"></a>Context</h3></div></div></div><p>For some applications the entire description of a resource might be maintained by a single authority, e.g. the data might all derive from a single data conversion or be managed by a single editing interface. However in some applications data about a single resource might be contributed in different ways. One example might be a VoiD description for a dataset. A dataset description may consist of a mixture of hand-authored information -- e.g. a title, description, and example resources -- plus some statistics derived from the dataset itself, e.g. size and class partitions. An administrator might update the descriptive aspects while the rest is updated asynchronously by a background application that analyses the dataset.</p><p>Multiple applications writing to the same graph could lead to contention for system resources or the need to implement complex locking behaviour.</p></div><div class="sect2" title="Solution"><div class="titlepage"><div><div><h3 class="title"><a id="id2622730"></a>Solution</h3></div></div></div><p>Apply a combination of the <a class="link" href="graph-per-resource.html" title="Graph Per Resource">Graph Per Resource</a> and <a class="link" href="graph-per-source.html" title="Graph Per Source">Graph Per Source</a> patterns and factor out the different aspects of a resources description into separate graphs. Use a <a class="link" href="union-graph.html" title="Union Graph">Union Graph</a> to collate the different aspects of the description of a resource into a single view.</p></div><div class="sect2" title="Example(s)"><div class="titlepage"><div><div><h3 class="title"><a id="id2622763"></a>Example(s)</h3></div></div></div><p>A content management application stores information about articles. This includes descriptive metadata about the articles as well as pointers to the content. Content metadata will be manually managed by users. In the background two additional processes will be carrying out additional tasks. One will be retrieving the content of the article to perform text mining, resulting in machine-tagging of subjects in the article. The second will be harvesting related links from the rest of the system and the web. The "aspect graphs" are created: one for the core metadata, one for the tags and one for the links:</p><pre class="programlisting">
	
#core description of a resource; provided by user
&lt;http://data.example.org/graphs/core/document/1&gt; {
	&lt;http://example.org/document/1&gt; dct:title "Bath in the Summertime".
}    	
#tags; maintained by process 1.
&lt;http://data.example.org/graphs/tags/document/1&gt; {
	&lt;http://example.org/document/1&gt; dc:subject "Bath".
	&lt;http://example.org/document/1&gt; dc:subject "Travel".
}    	
#related links; maintained by process 2.
&lt;http://data.example.org/graphs/links/document/1&gt; {
	&lt;http://example.org/document/1&gt; dct:related &lt;http://travel.example.org/doc/bath&gt;.
}    	
#System metadata graph, listing topic of each graph
&lt;http://data.example.org/graphs&gt; { 
	&lt;http://data.example.org/graphs/core/document/1&gt; foaf:primaryTopic &lt;http://example.org/document/1&gt;.
	&lt;http://data.example.org/graphs/tags/document/1&gt; foaf:primaryTopic &lt;http://example.org/document/1&gt;.
	&lt;http://data.example.org/graphs/links/document/1&gt; foaf:primaryTopic &lt;http://example.org/document/1&gt;.
}
</pre><p>As the above example illustrates, graph URIs for the different aspects of a resources description can by generated by using <a class="link" href="patterned-uris.html" title="Patterned URIs">Patterned URIs</a>. A fourth graph, covering system-wide metadata is also maintained. This graph lists the <code class="code">foaf:primaryTopic</code> of each graph, allowing applications to discover which graphs relate to a specific resource.</p><p>
	An application consuming this data could rely on either a system default <a class="link" href="union-graph.html" title="Union Graph">Union Graph</a> to provide a complete view of a resource. Partial views might address individual named graphs. Using a CONSTRUCT query it is also possible to construct a view of a resource using just those graphs referenced in the system metadata graph:</p><pre class="programlisting">
	
CONSTRUCT { ?s ?p ?o. }
WHERE {
  &lt;http://data.example.org/graphs&gt; {
   	  ?graph foaf:primaryTopic &lt;http://example.org/document/1&gt;.
  }
  ?graph { ?s ?p ?o. }
}
</pre></div><div class="sect2" title="Discussion"><div class="titlepage"><div><div><h3 class="title"><a id="id2623766"></a>Discussion</h3></div></div></div><p>Named graphs provide flexibility in how to organise an RDF data store. In some cases storage is oriented towards the sources of data, in others around individual resources. The Graph Per Aspect pattern provides a combination of those features that allows for very fine-grained graph management. The description of each resource is divided over a number of graphs, each of which is contributed to the system by a different source or application component.</p><p>As with the other named graph patterns reliance is made on the <a class="link" href="union-graph.html" title="Union Graph">Union Graph</a> pattern to bring together the description of a resource into a single consistent view.</p><p>Separating out aspects of resource description into different graphs also provides a way to shard a dataset. Different aspects might be stored in different triple stores across a network. These are then brought together in the application for building a user interface. With knowledge of how graphs are partitioned across the network, as well as which graphs contain which statements, an application can use <a class="link" href="parallel-retrieval.html" title="Parallel Retrieval">Parallel Retrieval</a> to synthesis a local working copy of a resource's description. This aggregation could happen within a server component or on the client-side</p><p>The small, focused graphs created by use of this pattern and, more generally, by the <a class="link" href="graph-per-resource.html" title="Graph Per Resource">Graph Per Resource</a> pattern are very amenable for delivery to mobile &amp; web clients for local processing. By separating out the different aspects of a resource into graphs that are likely to change with differing frequencies, caching can be made much more efficient.</p></div><div class="sect2" title="Related"><div class="titlepage"><div><div><h3 class="title"><a id="id2623837"></a>Related</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="named-graphs.html" title="Named Graph">Named Graph</a></li><li class="listitem"><a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a></li><li class="listitem"><a class="link" href="graph-per-source.html" title="Graph Per Source">Graph Per Source</a></li><li class="listitem"><a class="link" href="graph-per-aspect.html" title="Graph Per Aspect">Graph Per Aspect</a></li></ul></div></div><div class="sect2" title="Further Reading"><div class="titlepage"><div><div><h3 class="title"><a id="id2623871"></a>Further Reading</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="ulink" href="" target="_top">Keep Your Triples Together: Modeling a RESTtful, Layered Linked Data Store</a></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="graph-annotation.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="data-management-patterns.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="graph-per-resource.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Graph Annotation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Graph Per Resource</td></tr></table></div></body></html>
