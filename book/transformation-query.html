<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Transformation Query</title><link rel="stylesheet" href="../css/style.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="Linked Data Patterns" /><link rel="up" href="application-patterns.html" title="Chapter 6. Application Patterns" /><link rel="prev" href="smushing.html" title="Smushing" /><link rel="next" href="uri-resolver.html" title="URI Resolver" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Transformation Query</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="smushing.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Application Patterns</th><td width="20%" align="right"> <a accesskey="n" href="uri-resolver.html">Next</a></td></tr></table><hr /></div><div class="sect1" title="Transformation Query"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="transformation-query"></a>Transformation Query</h2></div></div></div><p> 
   <span class="emphasis"><em>How can we normalize or transform some RDF data so that it conforms to a preferred model?</em></span>
  </p><div class="sect2" title="Context"><div class="titlepage"><div><div><h3 class="title"><a id="id2631551"></a>Context</h3></div></div></div><p>There are a broad range of different vocabularies in use on the Linked Data web. While there has been convergence on common vocabularies in a number of domains, there will always be some variations in how data is presented, e.g. using slightly different modelling styles and vocabularies. Schemas will also evolve over time and certain properties may be refined or replaced. How can a consuming application normalize these different models into a single preferred representation that matches expectations or requirements of the application code?</p></div><div class="sect2" title="Solution"><div class="titlepage"><div><div><h3 class="title"><a id="id2631569"></a>Solution</h3></div></div></div><p>Use a SPARQL <code class="code">CONSTRUCT</code> query, or collection of queries, to generate a normalized view of the data, saving the results back into the triple store.</p></div><div class="sect2" title="Example(s)"><div class="titlepage"><div><div><h3 class="title"><a id="id2631583"></a>Example(s)</h3></div></div></div><p>The following query normalizes any one of three different naming or labelling properties into <code class="code">rdfs:label</code> properties.</p><pre class="programlisting">

PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
PREFIX vCard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt;
CONSTRUCT {
  ?s rdfs:label ?o.
}
WHERE {
  {  ?s foaf:name ?o. }
  UNION
  {  ?s vCard:FN ?o. }
  UNION
  {  ?s skos:prefLabel ?o. }
}

  </pre></div><div class="sect2" title="Discussion"><div class="titlepage"><div><div><h3 class="title"><a id="id2632510"></a>Discussion</h3></div></div></div><p>Writing application code to normalize data patterns can be tedious and difficult to maintain in the face of changes. SPARQL <code class="code">CONSTRUCT</code> queries provide a way to generate arbitrary RDF graphs from existing data. They therefore provide a way to carry out transformations on RDF graph. These transformations can be used to infer new data based on existing patterns and this covers the generation of normalized data models. SPARQL therefore provides a declarative syntax for describing graph transformations. The increased expressivity of SPARQL 1.1 will allow more complex transformations to be specified.</p><p>An application may apply one or more Transformation Queries to its data source either during execution, e.g. to extract a graph of a known structure, or during assembly of the underlying dataset, e.g. as part of the <a class="link" href="blackboard.html" title="Blackboard">Blackboard</a> pattern.</p><p>Each transformation query may cover one specific normalization task. However, as shown in the example above, several operations can be combined using a <code class="code">UNION</code> query. This allows the graph pattern of the query to match for a number of different variants, resulting in the generation of a single standard output graph.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="smushing.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="application-patterns.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="uri-resolver.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Smushing </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> URI Resolver</td></tr></table></div></body></html>
