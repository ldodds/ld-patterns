<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Graph Per Source</title><link rel="stylesheet" type="text/css" href="../css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Linked Data Patterns" /><link rel="up" href="data-management-patterns.html" title="Chapter 5. Data Management Patterns" /><link rel="prev" href="graph-per-resource.html" title="Graph Per Resource" /><link rel="next" href="named-graphs.html" title="Named Graph" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Graph Per Source</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="graph-per-resource.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Data Management Patterns</th><td width="20%" align="right"> <a accesskey="n" href="named-graphs.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-per-source"></a>Graph Per Source</h2></div></div></div><p> 
   <span class="emphasis"><em>How can we track the source of some triples in an RDF dataset?</em></span>
  </p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1365"></a>Context</h3></div></div></div><p>A common application requirement is to create a local cache of RDF data which originates from other sources. For example an 
application might crawl or harvest data from the Linked Data cloud and store it local triple store. Data from relational databases or 
other sources might also be regularly converted into RDF and added to a triple store.</p><p>While the applications directly consuming this data may not need any knowledge of their origin when querying the dataset, the applications doing the data management activities (e.g. crawling or data conversions) will need to be able to clearly identify which triples came from which source dataset or URL.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1369"></a>Solution</h3></div></div></div><p>Use a separate <a class="link" href="named-graphs.html" title="Named Graph">named graph</a> for each data source. For the named graph URI either use a well-known URI for each data source, e.g. the URI of the dataset, or simply the URL from which the data was retrieved.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1373"></a>Example(s)</h3></div></div></div><p>An application is harvesting RDF documents from the web. Upon discovering the URL <code class="code">http://www.example.org/person.rdf</code> the application does a GET request to retrieve the document. The RDF statements found in that document are then stored in the applications triple store in a new named graph with the source URI as the graph identifier:</p><pre class="programlisting">
#Named graph URI is source document
&lt;http://www.example.org/person.rdf&gt; { 
  #Triples from source document
  &lt;http://www.example.org/person/joe&gt; foaf:name "Joe Bloggs". 
}
</pre><p>The harvesting application can easily determine whether it has already harvested a URL by checking to see whether a named graph with that URI exists in the store. The next time that the application retrieves the content of the URL, e.g. as part of a cache refresh, the contents of just that graph can be replaced.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1379"></a>Discussion</h3></div></div></div><p>The URI that labels a <a class="link" href="named-graphs.html" title="Named Graph">named graph</a> can be used in several different ways. One very common approach is to use the label to hold the URL from which a set of triples was retrieved. By using the graph URI to identify the source of the data it becomes possible to track the provenance of the data within the store. This can simplify common dataset construction scenarios, e.g. mirroring of data harvested from the web.</p><p>Checking for the presence of a graph within a store can be achieved using a simple <a class="link" href="assertion-query.html" title="Assertion Query">assertion query</a>:</p><pre class="programlisting">
	ASK WHERE {
		&lt;http://www.example.org/person.rdf&gt; { ?s ?p ?o. }
	}</pre><p>The query will return true if there are any statements associated with a graph with the specified identifier</p><p>An application may need to be present to an end-user the list of locations from which some RDF statements have been found. This too can be achieved using a simple SPARQL query:</p><pre class="programlisting">
	SELECT ?graph WHERE {
		GRAPH ?graph { 
  			&lt;http://www.example.org/person/joe&gt; foaf:name "Joe Bloggs". 
		}
	}</pre><p>In the above example the query will return the URIs of all graphs that contain the specified RDF triple; "which sources say that <code class="code">http://www.example.org/person/joe</code> has a <code class="code">foaf:name</code> of "Joe Bloggs".</p><p>It is often important to capture some additional information about the source of the URL. For example a web crawler might want to record the retrieval data and HTTP headers associated with the original web request. This would allow for more efficient cache maintenance. The <a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a> pattern describes this in more detail.</p><p>It is worth noting that in some cases a direct application of this pattern can make graph annotation more awkward: by using the source URL as the graph URI we can no longer distinguish between statements made about the <span class="emphasis"><em>graph</em></span> and statements made about the <span class="emphasis"><em>source document</em></span>. E.g. the date of creation of the graph and the date of creation of the document. This may be an issue for some application scenarios, although for others (e.g. simple aggregation) this may not be an problem.</p><p>As described in the <a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a> pattern the solution to this issue is to use a different identifier for the graph, e.g. a <a class="link" href="patterned-uris.html" title="Patterned URIs">Patterned URI</a> derived from the source URL. The source URL of the graph can then be captured as an annotation.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1400"></a>Related</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="named-graphs.html" title="Named Graph">Named Graph</a></li><li class="listitem"><a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a></li><li class="listitem"><a class="link" href="graph-per-resource.html" title="Graph Per Resource">Graph Per Resource</a></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idm1409"></a>Further Reading</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="ulink" href="" target="_top">Named Graph (Wikipedia)</a></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="graph-per-resource.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="data-management-patterns.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="named-graphs.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Graph Per Resource </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Named Graph</td></tr></table></div></body></html>