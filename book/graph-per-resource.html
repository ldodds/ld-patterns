<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Graph Per Resource</title><link rel="stylesheet" href="../css/style.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="Linked Data Patterns" /><link rel="up" href="data-management-patterns.html" title="Chapter 5. Data Management Patterns" /><link rel="prev" href="graph-per-aspect.html" title="Graph Per Aspect" /><link rel="next" href="graph-per-source.html" title="Graph Per Source" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Graph Per Resource</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="graph-per-aspect.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Data Management Patterns</th><td width="20%" align="right"> <a accesskey="n" href="graph-per-source.html">Next</a></td></tr></table><hr /></div><div class="sect1" title="Graph Per Resource"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-per-resource"></a>Graph Per Resource</h2></div></div></div><p> 
   <span class="emphasis"><em>How can we organise a triple store in order to make it easy to manage the statements about an individual resource?</em></span>
  </p><div class="sect2" title="Context"><div class="titlepage"><div><div><h3 class="title"><a id="id2623376"></a>Context</h3></div></div></div><p>Web applications typically offer forms for editing the description of an individual resource, e.g. the title, description and tags that apply to a specific photo. RESTful APIs typically support replacing the description of a resource using a PUT operation. In both cases it would be useful to be able to serialize all of the statements relating to a given resource, including any edits, and directly replace the relevant triples in a triple store backing the application or API.</p></div><div class="sect2" title="Solution"><div class="titlepage"><div><div><h3 class="title"><a id="id2623393"></a>Solution</h3></div></div></div><p>Store the description of each resource in a separate <a class="link" href="named-graphs.html" title="Named Graph">Named Graph</a> using a graph URI derived from the resource URI as the graph URI. When the resource is updated, simply replace the contents of that graph with the latest state of the resource.</p></div><div class="sect2" title="Example(s)"><div class="titlepage"><div><div><h3 class="title"><a id="id2623412"></a>Example(s)</h3></div></div></div><p>A user is editing the description of <code class="code">http://example.org/picture/1</code>. The application delivers a web form to the authorised user which presents the current description of the resource in an interactive editing form. When the client submits the changes back to the server, it does so by serializing the state of the form as RDF which is then processed by the server.</p><p>On receiving the update from the client, the server-side code computes the graph URI for the resource being edited. For this application graph URIs are derived from resource URIs by a simple rewrite. For example the data for <code class="code">http://example.org/picture/1</code> is stored in <code class="code">http://data.example.org/graphs/picture/1</code>.</p><p>To apply the update the server-side code simply determines the appropriate graph URI and then stores the data in a <a class="ulink" href="" target="_top">SPARQL 1.1. Graph Store Protocol</a> enabled store using a simple PUT operation.</p></div><div class="sect2" title="Discussion"><div class="titlepage"><div><div><h3 class="title"><a id="id2623653"></a>Discussion</h3></div></div></div><p>Partioning the triple store by resource rather than by <a class="link" href="graph-per-source.html" title="Graph Per Source">source</a> provides an easy way to quickly access the description of an individual resource without having to use a SPARQL query. This is particularly true if the graph URI for a resource can be derived using a simple algorithm, e.g. rewriting to a different base URI, pre-pending a known prefix, etc.</p><p>The <a class="ulink" href="" target="_top">SPARQL 1.1. Graph Store Protocol</a> provides a way for code to find and update the description of a resource without needing further knowledge of the data stored about any specific resource. This allows server-side code to remain relatively generic: it doesn't need to know details about what kinds of data is captured about individual resources, it just needs to know where to persist the data its given.</p><p>When applying this pattern it is common to store a <a class="link" href="bounded-description.html" title="Bounded Description">bounded description</a> of the resource in each graph ensuring that each graph has a clear scope.</p><p>While this pattern makes it easy to manage a bounded description for a resource, including its relationships to other resource, it doesn't help with managing references to the resource elsewhere in the store. E.g. if a resource is deleted (by removing its graph), there may still be statements relating to that resource elsewhere in the graph. Additional SPARQL Update operations, for example, would be needed to remove these statements. Depending on the complexity of the graph structure and the needs of the application these overheads might make this pattern unsuitable.</p><p>In circumstances where additional context is required, e.g. in-bound relations, for an application view, a fall-back to SPARQL queries over a <a class="link" href="union-graph.html" title="Union Graph">Union Graph</a> of the store can provide additional flexibility. However for the simplest cases of serving Linked Data pages, this pattern makes for very simple and light-weight application code.</p><p>For very simple use cases the graph URI of the graph holding the description of the resource could in fact be the resource URI. However in practice this can limit system evolution. As explained in the <a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a> pattern, the ability to store additional graph metadata can be useful. And in that case a separate graph URI is essential to avoid potential confusion around the scope of individual statements.</p><p>In some applications several different processes might contribute to the creation of a description of a resource. Using a single graph per resource might therefore involve contention around several processes. The <a class="link" href="graph-per-aspect.html" title="Graph Per Aspect">Graph Per Aspect</a> pattern allows this contention to be removed by using multiple graphs per resource.</p></div><div class="sect2" title="Related"><div class="titlepage"><div><div><h3 class="title"><a id="id2624382"></a>Related</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="named-graphs.html" title="Named Graph">Named Graph</a></li><li class="listitem"><a class="link" href="graph-annotation.html" title="Graph Annotation">Graph Annotation</a></li><li class="listitem"><a class="link" href="graph-per-source.html" title="Graph Per Source">Graph Per Source</a></li><li class="listitem"><a class="link" href="graph-per-aspect.html" title="Graph Per Aspect">Graph Per Aspect</a></li></ul></div></div><div class="sect2" title="Further Reading"><div class="titlepage"><div><div><h3 class="title"><a id="id2624416"></a>Further Reading</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="ulink" href="" target="_top">Named Graph (Wikipedia)</a></li><li class="listitem"><a class="ulink" href="" target="_top">Managing RDF using Named Graphs</a></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="graph-per-aspect.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="data-management-patterns.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="graph-per-source.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Graph Per Aspect </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Graph Per Source</td></tr></table></div></body></html>
